<html>

<head>
  <link rel="stylesheet" href="/dist/semantic.min.css">
  <link rel="stylesheet" href="/style.css">
  <link rel="stylesheet" href="/atom-one-dark.css">
  <script src="/dist/semantic.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.11.0/highlight.min.js"></script>
</head>

<body>
  <div class="ui container">
    <div>
  <h1 class='page title ui center aligned header'>
    Organised Haystack
  </h1>
  <img class="ui centered logo image" src='/images/scribble.png' width="70px"/>
</div>

    <div class="ui one column grid">
  <div class="center aligned column">

    <div class="ui secondary pointing compact menu">
      <a class="item" href='/'> Home </a>
      <a class="item"> Archive </a>
    </div>

  </div>
</div>

    <div class="ui stackable grid">

      <div class="four wide column">
        <div class="ui teal raised segment">
          <div>
  <img class="ui tiny circular image" src="/images/photo.jpg">
  <h3>Louis Tian</h3>
  <i>I write in pseudo-english.
    This is a blog mostly for myself to organise the my thoughts,
    but your are welcome to wonder around.
  </i>
  <h5>
    Economist &middot;
    üíª Data Scientist &middot;
    üåê Web Dev &middot;
    ‚òï Caffeine Addict
  </h5>
  <div class="ui list">
    <div class="item">
      <i class="github icon"></i>
      <div class="content">
        https://github.com/Louis-Tian
      </div>
    </div>
    <div class="item">
      <i class="marker icon"></i>
      <div class="content">
        The Captial of Red Continent
      </div>
    </div>
    <div class="item">
      <i class="mail icon"></i>
      <div class="content">
        <a href="mailto:tianchuanting@gmail.com">tianchuanting@gmail.com</a>
      </div>
    </div>
  </div>
</div>

        </div>
        <div class="ui vertical segment">
          <h4>Recent Posts</h4>
          <ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2017-05-01-hydrogen_gce/">Hydrogen + Google Compute Engine</a></li><li class="post-list-item"><a class="post-list-link" href="/2017-05-01-montyHall/">Monty Hall @ Done Right</a></li></ul>
        </div>
        <div class="ui vertical segment">
          <h4>Tags</h4>
          <a href="/tags/statistics/" style="font-size: 10px; color: #808080">statistics</a> <a href="/tags/Machine-learning/" style="font-size: 10px; color: #808080">Machine learning</a> <a href="/tags/Hydrogen/" style="font-size: 10px; color: #808080">Hydrogen</a> <a href="/tags/Google-Compute-Engine/" style="font-size: 10px; color: #808080">Google Compute Engine</a> <a href="/tags/Atom/" style="font-size: 10px; color: #808080">Atom</a>
        </div>
      </div>

      <div class="twelve wide column"><div class="posts">
  <div class="ui divided items">
    
      <div class="post">
  <div class="ui stackable grid">
    <div class="twelve wide column">
      <div class="post title">Hydrogen + Google Compute Engine</div>
      <div class="post subtitle">My setup for machine learning</div>
      <div class="post date">01 May 2017</div>
      <div class='ui divider'></div>
      <p>Recently, I started became addicted to the machine learning competitions on Kaggle.com.</p>
<p>I am relatively new to the whole ML business. After some long waiting for a died kernel or <code>Memory Error</code>, I realized my MacBook Pro isn‚Äôt up for this kind of tasks. I started by contemplating invested in a new desktop. But hey it‚Äôs 2017 having a desktop at home isn‚Äôt the sexist idea. Then there comes Google offer $300 dollar for trying their cloud platform.</p>
<p>Hardware isn‚Äôt the only problem. In ML, <code>Python</code> is the king. And when doing any kind of numerical stuff in <code>Python</code>, <code>Jupyter</code> is the go-to tool. However, keeping proper versioning for <code>jupyter notebook</code> has always been a difficult task.</p>
<p>And the perfect solution is ? <code>Jupyter</code> + <code>Hydrogen</code>. Here is how.</p>
<a id="more"></a>
<h3 id="Why-Google-Compute-Engine-GCE"><a href="#Why-Google-Compute-Engine-GCE" class="headerlink" title="Why Google Compute Engine (GCE)?"></a>Why Google Compute Engine (GCE)?</h3><p>There are two main reasons:</p>
<ol>
<li>Scalable</li>
<li>Economical</li>
</ol>
<p>Using GCE you can scale up and down as you wish, from a free single shared core micro instance up a 64-core beast machine with 416GB of RAM and 8 Tesla K80 GPU. If that‚Äôs not enough, running a cluster of machines and sky is your limit.</p>
<p>This is not only more flexible but also heaps cheaper. Economy of scale, as an economist would say. And that‚Äôs not even the best part. Most of the time you can even run with ‚ÄúPreemptible‚Äù instances which makes things even cheaper.</p>
<p>I won‚Äôt go into the details of how to get an Google Compute Engine instance up and running. The guys<br>at Google made it super easy, just go checkout the documentation <a href="https://cloud.google.com/docs/" target="_blank" rel="external">here</a></p>
<p>I don‚Äôt really use AWS, so I won‚Äôt comment on the difference. But the most steps will be the same for both platforms, other than the parts involves <code>gcloud</code> commands.</p>
<p>The rest of the post will assume you have GCE setup and has the Google Cloud SDK installed.</p>
<h3 id="Why-Hydrogen"><a href="#Why-Hydrogen" class="headerlink" title="Why Hydrogen ?"></a>Why Hydrogen ?</h3><p><code>Hydrogen</code> is a <code>Atom</code> plugin. A very cool one. There are two main reasons of using it instead of vanilla <code>Jupyter</code> notebook in browser:</p>
<ol>
<li>Stay within the wonderful world of Atom.</li>
<li>Finally, proper version control for your Jupiter notebooks.</li>
</ol>
<p>Atom has a who bunch of goodies to offer, VIM key binding, Git integration.</p>
<p>We all love Jupiter but VC is hard for Jupiter notebooks. It‚Äôs <code>html</code> with both inputs and outputs.<br>Try to a diff between two commit‚Ä¶ Let‚Äôs face it, it‚Äôs crap. With Hydrogen, finally, you can have a<br>best of both world. Unlike Jupiter notebook, you write in a plain <code>.py</code> file.</p>
<h3 id="Set-Thing-UP"><a href="#Set-Thing-UP" class="headerlink" title="Set Thing UP"></a>Set Thing UP</h3><h4 id="1-Launch-google-cloud-engine"><a href="#1-Launch-google-cloud-engine" class="headerlink" title="1. Launch google cloud engine"></a>1. Launch google cloud engine</h4><pre><code class="shell">
$ gcloud compute instance start instance_name --zone=your_instance_zoon
</code></pre>


<h4 id="2-Turnoff-Juptyer-Token"><a href="#2-Turnoff-Juptyer-Token" class="headerlink" title="2. Turnoff Juptyer Token"></a>2. Turnoff Juptyer Token</h4><p>Go to <code>~/.jupyter/.jupyter_notebook_config.py</code> and set <code>c.Notebookapp.token=&#39;&#39;</code> to disable token. Since, we will be using SSH, we will still be secure without the token.</p>
<h4 id="3-Start-Jupyter"><a href="#3-Start-Jupyter" class="headerlink" title="3. Start Jupyter"></a>3. Start Jupyter</h4><pre><code class="shell">
jupyter notebook --port=8888
</code></pre>


<h4 id="4-Create-SSH-Tunnel"><a href="#4-Create-SSH-Tunnel" class="headerlink" title="4. Create SSH Tunnel"></a>4. Create SSH Tunnel</h4><pre><code class="shell">
ssh -N -L localhost:8888:localhost:8888 remote_username@remote_ip_address<
/code></code></pre>
The external ip address will change every time you launch a new instance. You need get the remote_ip_address from step 1 every time. There must be a way to chain the two steps together, but I haven't explored to much on this.


#### 5. Config Hydrogen
Change the `Hydrogen`
<pre><code class="javascript">
[{
  "name": "Google Compute Engine",
  "options": { "baseUrl": "http://localhost:8888"}
}]
</code></pre>


<h4 id="6-Connect-Remote-Kernel"><a href="#6-Connect-Remote-Kernel" class="headerlink" title="6. Connect Remote Kernel"></a>6. Connect Remote Kernel</h4><ul>
<li>Go to your <code>.py</code> file.</li>
<li>type <code>cmd-shift-p</code> to bring up the command palette.</li>
<li>Search for<code>Hydrogen: Connect To Remote Kernel</code> and press enter.</li>
</ul>
<h4 id="7-Enjoy-and-Happy-Coding"><a href="#7-Enjoy-and-Happy-Coding" class="headerlink" title="7.  Enjoy and Happy Coding."></a>7.  Enjoy and Happy Coding.</h4>
    </div>
  </div>
  <div class="divider"></div>
</div>

    
      <div class="post">
  <div class="ui stackable grid">
    <div class="twelve wide column">
      <div class="post title">Monty Hall @ Done Right</div>
      <div class="post subtitle">Explained in Visual</div>
      <div class="post date">01 May 2017</div>
      <div class='ui divider'></div>
      <p>Reserved for Cool Stuff</p>

    </div>
  </div>
  <div class="divider"></div>
</div>

    
  </div>
<div class="ui divider"></div>

<div class="ui grid">
  <div class="four wide column">
    
  </div>

  <div class="center aligned four wide column">
      1 / 1
  </div>

  <div class='four wide column'>
    

  </div>
</div>

</div>
</div>

    </div>
  </div>

  <div class="ui inverted vertical footer segment">
  <div class="ui container">
    <div class="ui stackable inverted divided equal height two column grid">
      <div class="column">
        <h4 class="ui inverted header">Powered By</h4>
        <div class="ui inverted link list">
          <a href="https://hexo.io" class="item">Hexo</a>
          <a href="https://semantic-ui.com" class="item">Semantic UI</a>
        </div>
      </div>
      <div class="column">
        <h4 class="ui inverted header">&copy;	Louis Tian</h4>
        <span>full rights reserved</span>
      </div>
    </div>
  </div>
</div>

  <script>hljs.initHighlightingOnLoad('atom-one-dark');</script>
</body>

</html>
